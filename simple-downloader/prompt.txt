あなたはシニアC++エンジニアです。
本番品質のコードを書いてください。

以下の要件を満たすダウンローダーをC++で実装してください。

【要件】
- 言語：C++
- libcurl を使用 (HTTP/HTTP2)
- バックグラウンドでファイルをダウンロード
- 1024byteずつダウンロード
- ダウンロードの一時停止・再開・中止に対応
- スレッドセーフ
- 大きなファイルにも対応（ストリーミング保存）
- Windows で動作

【必須機能】
- startDownload(url, outputPath)
- pause()
- resume()
- cancel()
- 進捗取得（% または bytes）

【通知機能（重要）】
observer パターンで実装：

- onProgress(downloadedBytes, totalBytes, percent)
- onCompleted()
- onError(errorMessage)
- onPaused()
- onResumed()
- onCancelled()

※ UI や他モジュールから使いやすい設計にすること

【設計要件】
- Downloader クラス設計
- RAII を守る
- 明確なスレッドモデル
- エラーハンドリング実装
- 低メモリ設計
- curl の range resume に対応
- 将来の複数同時ダウンロード拡張を考慮

【利用側サンプル（重要）】
このダウンローダーを使用する完全なサンプルコードを作成してください。

サンプル要件：
- main.cpp を作成
- Downloader を生成して使用
- 進捗をコンソール表示
- 完了・エラー・一時停止などをログ出力
- pause → resume → cancel の使用例を含める
- 実際に動作確認できる構成

【ビルド】
- 必要な CMakeLists.txt を生成
- Windows ビルド手順を書く
- 必要ライブラリを明記

【重要】
- 完全にコンパイル可能なコード
- 実用レベルの品質
- コメント多め
- まず設計概要を書いてから実装

UnitTest要件：
本ダウンローダーのユニットテストを作成してください。

【テスト要件】
- テストフレームワーク：GoogleTest を使用
- Downloader の主要機能をテストすること
- テストは自動実行可能にする
- モックやテスト用HTTPサーバ使用を検討
- スレッド関連の不具合を検出できる設計
- Windowsでビルド・実行可能

【最低限テストする項目】
- startDownload が正常開始する
- pause → resume が正しく動作
- cancel が正しく停止する
- 進捗通知が呼ばれる
- エラー時に onError が呼ばれる
- 存在しないURLで失敗する
- 大きなファイルでもクラッシュしない

【設計要件】
- テストしやすい設計（依存性注入など）にする
- curl 依存部分を可能なら抽象化
- テストコードは production code と分離
- 再現性のあるテスト（不安定なsleep依存を避ける）

【成果物】
以下を必ず生成：
- tests/ 配下のテストコード
- GoogleTest を含む CMakeLists.txt 更新
- テスト実行手順
- 必要なら簡易テストHTTPサーバ実装
